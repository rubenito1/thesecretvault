<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Panel – The Secret Vault</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body>
<div id="content">
  <h2>Cargando panel seguro...</h2>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const key = localStorage.getItem("vault_key");
  if (!key) { document.getElementById("content").innerHTML = "No hay contraseña."; return; }

  fetch("panel.enc")
    .then(r => r.text())
    .then(enc => {
        enc = enc.trim();
        const bytes = CryptoJS.AES.decrypt(enc, key);
        const decrypted = bytes.toString(CryptoJS.enc.Utf8);

        if (!decrypted) {
            document.getElementById("content").innerHTML = "Contraseña incorrecta.";
            return;
        }

        document.getElementById("content").innerHTML = decrypted;
    })
    .catch(() => { document.getElementById("content").innerHTML = "No se pudo cargar panel.enc"; });
});
</script>
</body>
</html>
